const image_send=document.querySelector("#image"),machine_send=document.querySelector("#machine"),dayInit=document.querySelector("#dayInit"),dayEnd=document.querySelector("#dayEnd"),cashin_send=document.querySelector("#cashin"),cashout=document.querySelector("#cashout"),bet=document.querySelector("#bet"),win=document.querySelector("#win"),jackpot=document.querySelector("#jackpot"),gamesplayed=document.querySelector("#gamesplayed"),casino_send=document.querySelector("#casinoid"),token_send=document.querySelector("#token"),confirmed=document.querySelector("#confirmed"),_csrfToken=document.getElementsByName("_csrfToken");async function sendData(e,o){const a=image_send.files[0],n=new FormData;n.append("image",a),n.append("machine_id",machine_send.value),n.append("day_init",dayInit.value),n.append("day_end",dayEnd.value),n.append("cashin",cashin_send.value),n.append("cashout",cashout.value),n.append("bet",bet.value),n.append("win",win.value),n.append("jackpot",jackpot.value),n.append("gamesplayed",gamesplayed.value),Swal.fire({title:"Enviando Contadores",html:"Enviando sus contadores, por favor espere!",timerProgressBar:!0,didOpen:()=>{Swal.showLoading()},willClose:()=>{clearInterval(void 0)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")});try{const a=`${window.location.protocol}//${window.location.hostname}/accountants/add?casinoid=${e}&token=${o}`,t=await fetch(a,{headers:{"X-CSRF-Token":_csrfToken[0].value},method:"POST",body:n});"ok"===await t.json()&&Swal.fire({title:"Exito!!",text:"Contadores Insertados Correctamente",icon:"success",allowOutsideClick:!1}).then(e=>{e.isConfirmed&&createLiquidation()})}catch(e){console.log(e),Swal.fire({title:"Ups!!",text:"Ocurrio un error. Verifica los datos e intentalo de nuevo",icon:"error",allowOutsideClick:!0})}}async function createLiquidation(){const e=new FormData;e.append("machine_id",machine_send.value),e.append("day_init",dayInit.value),e.append("day_end",dayEnd.value),e.append("cashin",cashin_send.value),e.append("cashout",cashout.value),e.append("bet",bet.value),e.append("win",win.value),e.append("jackpot",jackpot.value),e.append("games",gamesplayed.value);try{const o=`${window.location.protocol}//${window.location.hostname}/liquidations/add?casinoId=${casino_send.value}`,a=await fetch(o,{headers:{"X-CSRF-Token":_csrfToken[0].value},method:"POST",body:e});"ok"===await a.json()&&window.location.reload()}catch(e){console.log(e),Swal.fire({title:"Ups!!",text:"Ocurrio un error. Verifica los datos e intentalo de nuevo",icon:"error",allowOutsideClick:!0})}}confirmed.addEventListener("click",e=>{e.preventDefault();const o=casino_send.value,a=token_send.value;Swal.fire({title:"¿Estas Seguro?",text:"Esta Accion no se puede cambiar",icon:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, enviar!",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&sendData(o,a)})});const totalLiquidation=document.querySelector("#totalLiquidation"),generatebtn=document.querySelector("#generate");async function postLiquidation(){const e=new FormData;e.append("casino_id",casino_id.value),e.append("totalLiquidation",totalLiquidation.value),Swal.fire({title:"Insertando datos, por favor espere!",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{clearInterval(void 0)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")});try{const o=`${window.location.protocol}//${window.location.hostname}/totalaccountants/add`,a=await fetch(o,{headers:{"X-CSRF-Token":_csrfToken[0].value},method:"POST",body:e});"ok"===await a.json()&&Swal.fire({title:"Liquidacion Realizada",text:"Se liquidaron las participaciones correctamente",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"Descargar Liquidación",showCancelButton:!1}).then(e=>{e.isConfirmed&&window.location.replace(`${window.location.protocol}//${window.location.hostname}/casinos/getpdf?id=${casino_id.value}`)})}catch(e){console.log(e),Swal.fire({title:"Upss!!",text:"Hubo un error interno, intenta mas tarde :(",icon:"error"})}}generatebtn.addEventListener("click",e=>{e.preventDefault(),postLiquidation()});