const confirmed=document.querySelector("#confirmed"),id=document.querySelector("#id").value,quotes=document.querySelector("#quotes"),quotevalue=document.querySelector("#quotevalue");async function generarPagos(o){const e=new FormData;e.append("agreement_id",o),e.append("paymentquote",quotes.value),e.append("valuequote",quotevalue.value);try{const o=`${window.location.protocol}//${window.location.hostname}/payments/add`,t=await fetch(o,{method:"POST",body:e}),n=await t.json();console.log(n)}catch(o){console.log(o),swalWithBootstrapButtons.fire("Ups!!","Ha ocurrido un error. Intentalo mas tarde :(","error")}}confirmed.addEventListener("click",()=>{const o=new Date;o.toUTCString();const e=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"Advertencia?",text:"El contrato se firmara con fecha "+o,icon:"info",showCancelButton:!0,confirmButtonText:"Si, Firmar!",cancelButtonText:"No, Cancelar!",reverseButtons:!0}).then(async o=>{if(o.isConfirmed)try{const o=`${window.location.protocol}//${window.location.hostname}/agreements/signed?id=${id}`,t=await fetch(o);"ok"===await t.json()&&(generarPagos(id),e.fire("Exito!!","Contrato Firmado Exitosamente!!","success").then(o=>{o.isConfirmed&&window.location.reload()}))}catch(o){console.log(o),e.fire("Ups!!","Ha ocurrido un error. Intentalo mas tarde :(","error")}else o.dismiss===Swal.DismissReason.cancel&&e.fire("Cancelado","La operacion ha sido cancelada :)","error")})});