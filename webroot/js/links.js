"use strict";const add=document.querySelector("#add"),link=document.querySelector("#link"),url=document.querySelector("#url"),user=document.querySelector("#user"),pass=document.querySelector("#pass"),_csrfToken=document.getElementsByName("_csrfToken");let timerInterval;async function insertLink(){const e=new FormData;e.append("link",link.value),e.append("url",url.value),e.append("credentials",`Usuario o Correo: ${user.value}. Password: ${pass.value}`),Swal.fire({title:"Por favor espere!",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{clearInterval(timerInterval)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")});try{const o=`${window.location.protocol}//${window.location.hostname}/links/add`,r=await fetch(o,{headers:{"X-CSRF-Token":_csrfToken[0].value},method:"POST",body:e});"ok"===await r.json()&&Swal.fire({title:"Datos insertados correctamente!!",icon:"success",allowOutsideClick:!1}).then(e=>{e.isConfirmed&&(window.location.replace(`${window.location.protocol}//${window.location.hostname}/links`),Swal.fire({title:"Redireccionando",html:"Por favor espere, sera redireccionado a la pagina principal",allowOutsideClick:!1,timerProgressBar:!0,didOpen:()=>{Swal.showLoading();const e=Swal.getHtmlContainer().querySelector("b");timerInterval=setInterval(()=>{e.textContent=Swal.getTimerLeft()},100)},willClose:()=>{clearInterval(timerInterval)}}))})}catch(e){console.error(e)}}add.addEventListener("click",e=>{e.preventDefault(),""!=link.value&&""!=url.value&&""!=user.value?insertLink():Swal.fire({title:"Los Campos no pueden estar Vacios!!",icon:"error"})});