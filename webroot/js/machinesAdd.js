const intId=document.querySelector("#intId"),serial=document.querySelector("#serial"),add=document.querySelector("#add"),contrato=document.querySelector("#contrato"),date=document.querySelector("#date"),casino=document.querySelector("#casino"),company=document.querySelector("#company"),owner=document.querySelector("#owner"),name=document.querySelector("#name"),year=document.querySelector("#year"),model=document.querySelector("#model"),maker=document.querySelector("#maker"),warranty=document.querySelector("#warranty"),image=document.querySelector("#image"),height=document.querySelector("#height"),width=document.querySelector("#width"),val=document.querySelector("#val"),_csrfToken=document.getElementsByName("_csrfToken");async function searchIdInt(e){try{const a=`${window.location.protocol}//${window.location.hostname}/machines/searchIdInt?idint=${e}`,n=await fetch(a);"error"===await n.json()&&(Swal.fire("Error","Este Numero interno ya se encuentra en uso!!","error",intId.focus()),add.disabled=!0)}catch(e){add.disabled=!1}}async function searchSerial(e){const a=`${window.location.protocol}//${window.location.hostname}/machines/searchSerial?serial=${e}`,n=await fetch(a);"error"===await n.json()?(Swal.fire("Error","La maquina ya fue registrada!!","error",intId.focus()),add.disabled=!0):add.disabled=!1}async function insertMachine(e,a,n,o,t){const d=new FormData;d.append("idint",intId.value),d.append("serial",t),d.append("name",name.value),d.append("yearModel",year.value),d.append("model_id",model.value),d.append("maker_id",maker.value),d.append("warranty",warranty.value),d.append("image",image.files[0]),d.append("height",height.value),d.append("width",width.value),d.append("dateInstalling",o),d.append("casino_id",e),d.append("owner_id",a),d.append("company_id",n),d.append("cheked",1),d.append("contract_id",contrato.value),d.append("value",val.value),Swal.fire({title:"Ingresando Maquina, por favor espere!",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{clearInterval(void 0)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")});try{const e=`${window.location.protocol}//${window.location.hostname}/machines/add`,a=await fetch(e,{headers:{"X-CSRF-Token":_csrfToken[0].value},method:"POST",body:d});"ok"===await a.json()&&Swal.fire("Exito!!","Maquina Guardada con exito!!","success").then(e=>{e.isConfirmed&&window.location.replace(`${window.location.protocol}//${window.location.hostname}/machines/`)})}catch(e){console.log(e)}}intId.addEventListener("change",e=>{searchIdInt(e.target.value)}),serial.addEventListener("change",e=>{searchSerial(e.target.value)}),contrato.addEventListener("change",e=>{"3"===e.target.value?(casino.disabled=!0,owner.disabled=!0,company.disabled=!0,date.disabled=!0,serial.disabled=!0):(casino.disabled=!1,owner.disabled=!1,company.disabled=!1,date.disabled=!1,serial.disabled=!1)}),add.addEventListener("click",e=>{e.preventDefault();let a,n,o,t,d;"3"===contrato.value?(a=0,n=0,o=0,t="",d=0,insertMachine(a,n,o,t,d)):(a=casino.value,n=owner.value,o=company.value,t=date.value,d=serial.value,insertMachine(a,n,o,t,d))});