const generate=document.querySelector("#generate"),quote_id=document.querySelector("#quote_id"),client_id=document.querySelector("#client_id"),user=document.querySelector("#user");async function generateOrder(){Swal.fire({title:"Confirmar Datos",text:"Estas seguro de Guardar la orden, no se podra cambiar la orden de trabajo",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&Swal.fire("Orden Creada!",`La orden de trabajo # ${quote_id.value} Ha sido Generada con exito`,"success").then(e=>{e.isConfirmed&&createOrder()})})}async function createOrder(){const e=new FormData;e.append("order_id",quote_id.value),e.append("quote_id",quote_id.value),e.append("user_id",user.value),e.append("client_id",client_id.value),e.append("orderstatus_id",2),e.append("comments","");const o=`${window.location.protocol}//${window.location.hostname}/orders/add`,r=await fetch(o,{method:"POST",body:e});"ok"!==await r.json()||viewOrder()}async function viewOrder(){const e=`${window.location.protocol}//${window.location.hostname}/orders/viewOrder?quoteId=${quote_id.value}`,o=await fetch(e),r=await o.json();""===r||window.location.replace(`${window.location.protocol}//${window.location.hostname}/orders/view/${r.id}`)}generate.addEventListener("click",e=>{e.preventDefault(),0!=user.value?generateOrder():Swal.fire("Error","No se puede Generar una orden de trabajo Sin tecnico!!","error")});