const XCSRFToken=document.querySelector('[name="_csrfToken"]').value,businessid=document.querySelector("#bussines"),client=document.querySelector("#client"),casino=document.querySelector("#casino"),pieza=document.querySelector("#serial"),agregar=document.querySelector("#a√±adir");async function buscarEmpresa(e){const t=`http://${window.location.hostname}/alfastreet/quotes/search?business_id=${e}`,a=await fetch(t),n=await a.json();if(n){let e='<option value=""> --Seleccione una opcion </option>';for(let t=0;t<n.length;t++)e+=`<option value="${n[t].id}">${n[t].name}</option>`;client.innerHTML=e}}async function buscarCasino(e){const t=`http://${window.location.hostname}/alfastreet/quotes/getCasino?client_id=${e}`,a=await fetch(t),n=await a.json();if(n){let e='<option value=""> --Seleccione una opcion </option>';for(let t=0;t<n.length;t++)e+=`<option value="${n[t].id}">${n[t].name}</option>`;casino.innerHTML=e}}async function buscarPieza(e){const t=`http://${window.location.hostname}/alfastreet/quotes/getPart?serial_id=${e}`,a=await fetch(t),n=await a.json();if(n)for(let e=0;e<n.length;e++){document.querySelector("#name_serial").value=n[e].name;document.querySelector("#money_id").value=n[e].money_id;const t=document.querySelector("#value_serial");t.value=n[e].value;document.querySelector("#amount").addEventListener("keyup",e=>{let a=e.target.value;document.querySelector("#subtotal").value=t.value*a})}}businessid.addEventListener("change",e=>{buscarEmpresa(e.target.value)}),client.addEventListener("change",e=>{buscarCasino(e.target.value)}),pieza.addEventListener("keyup",e=>{buscarPieza(e.target.value)}),agregar.addEventListener("submit",e=>{e.preventDefault,agregarPieza()});