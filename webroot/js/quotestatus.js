const confirmed=document.querySelector("#confirmed"),canceled=document.querySelector("#canceled"),quoteid=document.querySelector("#quoteid").value;async function confirmedquote(t,o){const e=new FormData;e.append("quote_id",t),e.append("status_id",o);const n=`${window.location.protocol}//${window.location.hostname}/quotestatuses/add`,a=await fetch(n,{method:"POST",body:e});"exito"===await a.json()&&Swal.fire({title:"Ingrese el Numero de Factura relacionada a la cotizacion",input:"number",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirmar",showLoaderOnConfirm:!0,cancelButtonText:"Cancelar",preConfirm:o=>fetch(`${window.location.protocol}//${window.location.hostname}/quotestatuses/comment?invoice=${o}&quote=${t}`).then(t=>{if(!t.ok)throw new Error(t.statusText);return t.json()}).catch(t=>{Swal.showValidationMessage("Request failed: "+t)}),allowOutsideClick:()=>!Swal.isLoading()}).then(t=>{t.isConfirmed&&Swal.fire({icon:"success",title:"Exito!!",text:"Cotizacion Guardada Correctamente",confirmButtonText:"Ok"}).then(t=>{t.isConfirmed&&updateStatus()})})}async function updateStatus(){const t=`${window.location.protocol}//${window.location.hostname}/quotes/changestatus?quote=${quoteid}`,o=await fetch(t);"ok"===await o.json()&&window.location.reload()}confirmed.addEventListener("click",()=>{confirmedquote(quoteid,1)});